/* eslint-disable */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["mp-alipay-url-handler"]=t():e["mp-alipay-url-handler"]=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return c}));var r=n(1),o=n.n(r),a=n(2);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){if(!e)return console.warn("string url is required!");var t=/^alipayFinanceApi\:/.test(e),n=-1!==e.indexOf("nbupdate=syncforce"),r=/^pages\:/.test(e),c=/^mp\:/.test(e);if(t)return console.info("1. mpAlipayToFinancePage"),function(e){var t=e.split(":")[1],n=Object(a.urlToObj)(t);"h5Page"===n.type&&(n.url=decodeURIComponent(n.url));n.showAntWealth&&(n.showAntWealth="false"!==n.showAntWealth);return console.log("options",n),new Promise((function(e,t){my.canIUse("ap.navigateToFinance")?my.ap.navigateToFinance(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{success:e,fail:t})):(my.showToast({content:"支付宝版本过低，请升级后重试",success:function(e){}}),t())}))}(e);if(n)return console.info("2. mpAlipayToFortuneShop"),function(e){var t=Object(a.getQueryString)(e,"appId"),n=Object(a.getQueryString)(e,"query").substring(11);return new Promise((function(e,r){my.canIUse("navigateToMiniProgram")?my.navigateToMiniProgram({appId:t,extraData:{publicId:n},success:e,fail:r}):(my.showToast({content:"支付宝版本过低，请升级后重试",success:function(e){}}),r())}))}(e);if(r)return console.info("3. mpAlipayToInnerPage"),function(e){return e=e.split("pages:")[1],new Promise((function(t,n){return my.navigateTo({url:e,success:t,fail:n})}))}(e);if(c)return console.info("4. mpAlipayToMpAlipay"),p(e);if(console.info("5. mpAlipayToAlipayPage"),/^alipays\:\/\/platformapi\/startapp\?appId\=/.test(e)){var u=e.split("alipays://platformapi/startapp?appId=")[1];if(16===String(u).length)return p("mp:appId=".concat(u))}return function(e){if(/^pid\:/.test(e)){var t=e.split(":")[1];e="alipays://platformapi/startapp?appId=60000148&appClearTop=false&sms=YES&so=NO&ttb=auto&ttta=YES&url=/www/shop.html?pid=".concat(t)}return new Promise((function(t,n){my.canIUse("ap.navigateToAlipayPage")?my.ap.navigateToAlipayPage({path:e,success:t,fail:n}):(my.showToast({content:"支付宝版本过低，请升级后重试",success:function(e){}}),n())}))}(e);function p(e){var t=e.split(":")[1],n=Object(a.urlToObj)(t);return n.appId?new Promise((function(e,t){my.canIUse("navigateToMiniProgram")?my.navigateToMiniProgram({appId:n.appId,extraData:n,success:e,fail:t}):(my.showToast({content:"支付宝版本过低，请升级后重试",success:function(e){}}),t())})):console.warn("appId is required!")}}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";n.r(t),n.d(t,"loadScript",(function(){return i})),n.d(t,"ajaxGet",(function(){return c})),n.d(t,"objToUrl",(function(){return u})),n.d(t,"urlToObj",(function(){return p})),n.d(t,"getQueryString",(function(){return s})),n.d(t,"isWechatBrowser",(function(){return f})),n.d(t,"deepObjectMerge",(function(){return l}));var r=n(1),o=n.n(r);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e,t){var n=document.createElement("script");n.type="text/javascript",void 0!==t&&(n.readyState?n.onreadystatechange=function(){"loaded"!=n.readyState&&"complete"!=n.readyState||(n.onreadystatechange=null,t())}:n.onload=function(){t()}),n.src=e,document.body.appendChild(n)}function c(e,t){if(e){var n="";for(var r in t)n+="".concat(r,"=").concat(t[r],"&");return n=n.slice(0,n.length-1),e.split("?").length>1?e+="&".concat(n):(e.split("?").length=1)&&(e+="?".concat(n)),new Promise((function(t,n){var r;(r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){if(4==r.readyState){var e;try{e=JSON.parse(r.response)}catch(t){e=r.response}200==r.status?t(e):n(e)}},r.open("GET",e,!0),r.setRequestHeader("Content-Type","application/json;charset=UTF-8"),r.send()}))}}function u(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}function p(e){for(var t=e.split("&"),n={},r=0;r<t.length;r++){var o=t[r].split("=");""!=o[0]&&(n[o[0]]=o[1])}return n}function s(e,t){var n=e.split("?")[1];if(n){var r=n.split("&");for(var o in r){var a=r[o].split("=");if(a[0]===t)return a[1]}}return null}function f(){return-1!==navigator.userAgent.toLowerCase().indexOf("micromessenger")}function l(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);for(var r in t)n[r]=n[r]&&"[object Object]"===n[r].toString()?l(n[r],t[r]):n[r]=t[r];return n}}]).default}));